--drop Table AddRoom;
--drop Table MoveAssessment;
--drop table notes;
--drop table payment;
--drop table completed;
--drop table moveequipment;
--drop table travel;
--drop table LookAt;
--drop table Scheduling;
--drop table charges;
--drop table MOVEEMPLOYEES;
--drop table auctionInventory;
--drop table warehouse;
--drop table address;
--drop table PotentialDateTime;
--drop table tickethistory;
--drop table assignment;
--drop table equipment;
--drop table inventory;
--drop table ServiceRequest;
--drop table serviceticket;
--drop table auction;
--drop table Customer;
--drop table employee;
--drop table MOVEINFO;
--drop table SpecialEquipment;
--drop table Room;


--Create tables in database
create table EMPLOYEE (
	EmployeeID		int identity(1, 1) primary key,
	EmpFirstName	varchar(255),
	EmpLastName		varchar(255)
);

create table CUSTOMER (
	CustomerID		int not null identity(1, 1) primary key,
	FirstName		varchar(255),
	LastName		varchar(255),
	CellPhone			varchar(15),
	WorkPhone			varchar(15),
	HomePhone			varchar(15),
	Email			varchar(255),
	CompletedByEmp	int references EMPLOYEE(EmployeeID),
	DateContacted	nvarchar(20),
	InitialContactDate nvarchar(20),
	DeadlineDate	nvarchar(20),
	ReferralChannel varchar(20),
	PreferredContactMethod varchar(20),
	Completed		varchar(10)
);


create table AUCTION (
	AuctionID	int identity(1, 1) primary key,
	AuctionDate varchar(20),
);

create table SERVICETICKET (
	ServiceTicketID	int not null identity(1, 1) primary key,
	CustomerID		int references Customer(CustomerID),
	TicketOpenDate	varchar(20),
	PotentialDate	varchar(50),
	PotentialTime	varchar(50),
	ServiceDate		varchar(20),
	CompletionDate	varchar(20),
	ServiceType		char(20),
	DestinationTime	varchar(255),
	LookAtCB		varchar(10),
	LookAtDate		varchar(50),
	LookAtTime		varchar(50),
	InitiatingEmp	int references EMPLOYEE(EmployeeID),
	AuctionID		int references Auction(AuctionID),
	Status_Service	int,
	StorageCB		varchar(10),
	CleaningCB		varchar(10),
	TrashCB			varchar(10),
	Completed		varchar(10)
);

Create table Address(
AddressID int identity (1, 1) Primary Key,
ServiceTicketID		int references SERVICETICKET (ServiceTicketID),
CustomerID		int references Customer(CustomerID),
Street	varchar(255),
City		varchar(255),
State		varchar(255),
Zip		varchar(20),
Description		varchar(200)
)

Create table PotentialDateTime(
PotentialDateTimeID int identity (1, 1) Primary Key,
ServiceTicketID		int references SERVICETICKET (ServiceTicketID),
CustomerID		int references Customer(CustomerID),
PotentialDate	varchar(255),
PotentialTime		varchar(255),
Description		varchar(200)
)







create table SERVICEREQUEST	(
	ServiceRequestID    int not null identity(1, 1) primary key,
	ServiceType		    char(20),
	ServiceDate		    varchar(20),
	RequestDescription  varchar(500),
	RequestStatus		varchar(10),
	CustomerID		int references Customer(CustomerID)
);

create table INVENTORY (
	ItemID			int not null identity(1, 1) primary key,
	ServiceTicketID	int references SERVICETICKET(ServiceTicketID),
	ItemName varchar(50),
	ItemDescription	varchar(255),
	ItemCost		float,
	Quantity int,
	AddedDate		varchar(255)
);


create table EQUIPMENT (
	EquipmentID		int not null identity(1, 1) primary key,
	EquipmentType	varchar(255)
);

create table ASSIGNMENT (
	EquipmentID		int references Equipment(EquipmentID),
	ServiceTicketID	int references SERVICETICKET(ServiceTicketID),
	primary key (ServiceTicketID, EquipmentID)
);


create table TICKETHISTORY (
	TicketHistoryID	int not null identity(1, 1) primary key,
	TicketChangeDate	varchar(20),
	NoteTitle		varchar(255),
	NoteDetails		varchar(500),
	ServiceTicketID int references SERVICETICKET(ServiceTicketID),
	EmployeeID	int references Employee(EmployeeID)
);

CREATE TABLE WAREHOUSE(
	WarehouseID int IDENTITY(1,1) NOT NULL primary key,
	Date varchar(30) NULL,
	Location varchar(255),
	Description varchar(max) NULL,
	CustomerID int NULL
	);
	
	CREATE TABLE MOVEEMPLOYEES(
	MoveID int IDENTITY(1,1) NOT NULL PRIMARY KEY,
	EmployeeID int NULL,
	EmployeeName varchar(50) NULL,
	ServiceTicketID int NULL,

);

CREATE TABLE CHARGES(
	ChargeID int IDENTITY(1,1) NOT NULL PRIMARY KEY,
	Hours float NULL,
	Amount float NULL,
	Total float NULL,
	ServiceTicketID int NULL,
);

	
Create Table AUCTIONINVENTORY(
	AuctionInventoryID int not null identity(1, 1) primary key,
	AuctionNotes		varchar(200),
	ServiceTicketID	int references SERVICETICKET(ServiceTicketID)
);

Create Table SCHEDULING(
	SchedulingID int not null identity(1, 1) primary key,
	CustomerID		int references Customer(CustomerID),
	Purpose		    varchar(255),
	Description		varchar(255),
	Date			varchar(50),
	Time			varchar(50),
	MeetingLocation	varchar(255)
);

create Table LookAt(
LookAtID int identity(1, 1)  Not Null Primary Key,
TruckAccess varchar(1000),
Supplies varchar (1000),
Boxes varchar(1000),
Crew varchar(1000),
Trucks varchar(1000),
ServiceTicketID int references SERVICETICKET(ServiceTicketID),
CustomerID int references Customer(CustomerID)
);

CREATE TABLE TRAVEL(
	[TravelID] [int] IDENTITY(1,1) NOT NULL Primary Key,
	[Description] [varchar](100) NULL,
	[StartTime] [nvarchar](50) NULL,
	[EndTime] [nvarchar](50) NULL,
	[Hours] [float] NULL,
	[ServiceTicketID] [int] NULL
	);
	
CREATE TABLE MOVEEQUIPMENT(
	[MoveEquipmentID] [int] IDENTITY(1,1) NOT NULL Primary Key,
	[EquipmentID] [int] NULL,
	[EquipmentType] [nvarchar](50) NULL,
	[Mileage] [nvarchar](50) NULL,
	[ServiceTicketID] [int] NULL
	);
	
CREATE TABLE COMPLETED(
	[CompletedID] [int] IDENTITY(1,1) NOT NULL Primary Key,
	[CompletedDate] [varchar](50) NULL,
	[ServiceTicketID] [int] NULL,
	[CustomerID] [int] NULL
	);
	
CREATE TABLE PAYMENT(
	[PaymentID] [int] IDENTITY(1,1) NOT NULL Primary Key,
	[PaymentType] [varchar](50) NULL,
	[Cost] [float] NULL,
	[AdditionalExpenses] [nvarchar](50) NULL,
	[CompleteStatus] [varchar](50) NULL,
	[ServiceTicketID] [int] NULL
	);
CREATE TABLE MOVEINFO(
	[MoveInfoID] [int] IDENTITY(1,1) NOT NULL PRIMARY KEY,
	[NumberOfStories] [nvarchar](50) NULL,
	[DistanceFromTruck] [nvarchar](50) NULL,
	[TypeOfHome] [nvarchar](50) NULL,
	[TypeofHomeAdd] [nvarchar](1000) NULL,
	[TruckAccessibility] [nvarchar](50) NULL,
	[LoadingDoorWalk] [nvarchar](50) NULL,
	[StepsToHouse] [nvarchar](50) NULL,
	[ServiceTicketID] [int] NULL
	);
CREATE TABLE ROOM(
	[RoomID] [int] IDENTITY(1,1) NOT NULL PRIMARY KEY,
	[RoomType] [varchar](50) NULL,
	[BlanketNeeded] [varchar](50) NULL,
	[BlanketNumber] [varchar](50) NULL,
	[Floor] [varchar](50) NULL,
	[MoveInfoID] [int] NULL
	);
CREATE TABLE SPECIALEQUIPMENT(
	[SpecialEquipmentID] [int] IDENTITY(1,1) NOT NULL PRIMARY KEY,
	[EquipmentType] [nvarchar](100) NULL,
	[Quantity] [int] NULL,
	[ServiceTicketID] [int] NULL
	);

	

create Table MoveAssessment(
MoveAssessmentID int identity (1,1) Not Null Primary Key,
MustBeOut varchar (75),
Range1 varchar (100),
Range2 varchar (100),
DestAddress varchar(100),
DestCity varchar(100),
DestState varchar(50),
DestZipCode int,
MlSListing varchar(10),
SendPhotos varchar(25),
Packing varchar(25),
TrashRemoval varchar(25),
Donation varchar(25),
Auction varchar(25),
CustomerID int references Customer(CustomerID) );

CREATE TABLE NOTES (
	NoteID		int IDENTITY(1,1) NOT NULL Primary Key,
	DateCreated	varchar(30),
	NoteText	varchar(max),
	CustomerID	int references Customer(CustomerID)
);

Create Table AddRoom(
RoomID int Identity(1,1) Not Null Primary Key,
RoomName varchar(100),
OtherRoom varchar(100),
RideMower varchar (50),
PushMower varchar (50),
LargeTools varchar (50),
AtticAccessibility varchar(100),
PullDownSteps varchar(50),
BasementEntrance varchar(50),
TruckToDoor varchar(50),
DinningServer varchar(25),
HighValue varchar(50),
Sideboard varchar(50),
MirrorBack varchar(50),
MarbleTop varchar(50),
ChinaPress varchar(50),
Bowfront varchar(25),
HighValue1 varchar(25),
TwoPiece varchar(50),
DinningTable varchar (25),
NumberOfLeaves varchar(25),
NumberOfChairs varchar(25),
HighValue2 varchar(25),
Pedestal varchar(25),
SilverChest varchar(25),
HighValue3 varchar(25),
Rug varchar(25),
Breakfront varchar (25),
HighValue4 varchar (25),
TwoPiece1 varchar (25),
NumberOfSofas varchar (25),
LeatherSofas varchar (25),
NumberOfSofas1 varchar (25),
LeatherSofas1 varchar (25),
Identifier varchar (25), 
RoomFloor varchar(75),
OtherFloor varchar(75),
Boxes varchar (25),
NumberOfBoxes varchar (25),
BoxType varchar (25),
Blankets varchar (25),
Notes varchar (25),
serviceTicketID int references ServiceTicket(serviceTicketID),
CustomerID int references Customer(CustomerID)
);



---------------------------------------------
--Adding data to database--
---------------------------------------------

insert into EMPLOYEE values ('Jack', 'Frost');
insert into EMPLOYEE values ('Professor', 'Ezell');
insert into EMPLOYEE values ('Camille', 'Wood');

insert into CUSTOMER values ('Aaron', 'Walsh', '1234567822','123456789', '123456789','walsh@dukes.com', 1, '2021-03-07', '2021-03-05', '2021-03-30', 'From a friend', 'Call Cell', 'False' );
insert into CUSTOMER values ('Jared', 'Clatterbuck', '1234567890','', '','Clat@dukes.com', 2, '2021-03-07', '2021-03-05', '2021-04-30', 'From a friend', 'Call Home', 'False' );
insert into CUSTOMER values ('Stu', 'Guy', '','', '1234567890','Guy@dukes.com', 1,'2021-03-07', '2021-03-05', '2021-05-30', 'From a friend', 'Call Work', 'False' );

insert into EQUIPMENT values ('Pickup Truck #1');
insert into EQUIPMENT values ('Pickup Truck #2');
insert into EQUIPMENT values ('Forklift');
insert into EQUIPMENT values ('Box Truck');
insert into EQUIPMENT values ('Pallet Jack');

insert into Auction values ('Unassigned');
insert into Auction values ('2021-02-26');
insert into Auction values ('2021-03-05');

insert into SERVICETICKET values (1, '2021-01-01','2021-02-25','08:00','2021-02-01', '2021-02-07', 'Move', '13:30', 'True', '2021-06-30', '1:30', 1, 1, 25,'True','True','True', 'False');
insert into SERVICETICKET values (2, '2021-01-01','2021-02-25','12:00','2021-02-01', '2021-02-07', 'Auction', '13:30', 'True', '2021-06-30', '2:30', 2, 1, 50,'True','False','True', 'False');
insert into SERVICETICKET values (3, '2021-01-01','2021-02-25','16:00','2021-02-01', '2021-02-07', 'Move', '13:30', 'True', '2021-06-30', '12:30', 3, 1, 75,'True','False','False', 'False');


insert into SERVICEREQUEST values ('Move', '2021-06-15', 'We have a lot of things to move this day and will need plenty of help!','Active', 1);
insert into SERVICEREQUEST values ('Auction', '2021-06-30', 'We want to sell all of our bowls!', 'Active', 1);
insert into SERVICEREQUEST values ('Move', '2021-01-31', 'Help us!', 'Active', 1);


insert into Address values (null, 1, 'street', 'city','state ', '123', 'Primary Contact Address');
insert into Address values (null, 2, 'street', 'city','state ', '123', 'Primary Contact Address');
insert into Address values (3, 3, 'street', 'city','state ', '123', 'Primary Contact Address');


insert into INVENTORY values (1,'Bowl','Blue bowl', 500.23,  2, '2021-05-04');
insert into INVENTORY values (3,'mouse','Small bowl', 15.00,  1,'2021-05-04');
insert into INVENTORY values (2,'Lamp','Big bowl', 12.50,  2, '2021-05-04');
insert into INVENTORY values (3, 'Couch','Tiny bowl', 18.90, 1, '2021-05-04');
insert into INVENTORY values (1,'TV','Red bowl', 10000,  3, '2021-05-04');

insert into ASSIGNMENT values (1, 1);
insert into ASSIGNMENT values (1, 2);
insert into ASSIGNMENT values (2, 1);
insert into ASSIGNMENT values (2, 3);
insert into ASSIGNMENT values (3, 1);

insert into TICKETHISTORY values ('2021-01-01','Fragile','Customer says be careful with his small bowl',1,1);
insert into TICKETHISTORY values ('2021-01-03','Big Fragile','Customer also says be careful with his big bowl',1,2);
insert into TICKETHISTORY values ('2021-02-01','Phone change','Call customer at work number',2,2);
insert into TICKETHISTORY values ('2021-02-04','Call at home','Call customer at home number',3,2);

insert into AUCTIONINVENTORY values ('Looks to need about 15 boxes, 5 large items, going to need 4 men and 3 trucks', 2);

insert into SCHEDULING values (1, 'To Schedule Auction', 'Looking to sell 45 things', '2021-04-01', '12:30', 'In-Person');
insert into SCHEDULING values (2, 'To Schedule Move', 'Looking to move to Harrisonburg', '2021-04-15', '1:30', 'Staunton');
